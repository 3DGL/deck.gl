(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{mp7W:function(e,t,r){"use strict";r.r(t);var o=r("rePB"),a=r("dI71"),n=r("q1tI"),i=r.n(n),s=r("lxDd"),l=(r("i8i4"),r("b6DE")),c=r("pLLy"),u=r("gtVC"),p={longitude:-100,latitude:40,zoom:3,maxZoom:10},d=[{threshold:[.1,1],color:[255,255,178]},{threshold:[1,10],color:[254,204,92]},{threshold:[10,100],color:[253,141,60]},{threshold:[100,500],color:[240,59,32]},{threshold:[500,2e3],color:[189,0,38]},{threshold:[2e3,1e4],color:[159,0,80]}],m=[{threshold:1,color:[255,255,178],strokeWidth:2},{threshold:10,color:[254,204,92],strokeWidth:2},{threshold:100,color:[253,141,60],strokeWidth:2},{threshold:500,color:[240,59,32],strokeWidth:2},{threshold:2e3,color:[189,0,38],strokeWidth:2},{threshold:1e4,color:[159,0,80],strokeWidth:2}];function h(e){var t=e.data,r=void 0===t?"https://raw.githubusercontent.com/visgl/deck.gl-data/master/examples/contour/covid-by-county.json":t,o=e.week,a=void 0===o?35:o,n=e.contours,s=void 0===n?d:n,m=e.cellSize,h=void 0===m?6e4:m,y=e.mapStyle,f=void 0===y?"https://basemaps.cartocdn.com/gl/dark-matter-gl-style/style.json":y,b=[new u.a({data:r,id:"contour-layer",getPosition:function(e){return[e.longitude,e.latitude]},getWeight:function(e){return(e.casesByWeek[a]||0)/e.population*1e5},updateTriggers:{getWeight:a},pickable:!0,aggregation:"MAX",contours:s,cellSize:h})];return i.a.createElement(c.a,{initialViewState:p,controller:!0,layers:b,getTooltip:function(e){if(!e.object)return null;var t,r=new Date(Date.UTC(2020,0,20)+6048e5*a),o=e.object.contour.threshold;return t=1===o[1]?"<1 new case":2e3===o[0]?">2,000 new cases":o[0]+"-"+o[1]+" new cases","      Week of "+r.toJSON().slice(0,10)+"\n      "+t+" per 100K residents"},style:{mixBlendMode:"lighten"}},i.a.createElement(l.a,{reuseMaps:!0,mapStyle:f,preventStyleDiffing:!0}))}var y=r("CtqP");function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function b(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach((function(t){Object(o.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function g(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return v(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return v(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(r=e[Symbol.iterator]()).next.bind(r)}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,o=new Array(t);r<t;r++)o[r]=e[r];return o}var w=function(e){function t(){return e.apply(this,arguments)||this}Object(a.a)(t,e),t.renderInfo=function(e){return i.a.createElement("div",null,i.a.createElement("p",null,"Reported new COVID-19 cases per 100,000 residents ",e.date?"during "+e.date:null),i.a.createElement("div",{className:"layout"},m.map((function(e,t){return i.a.createElement("div",{className:"legend",key:t,style:{background:"rgb("+e.color.join(",")+")",width:100/m.length+"%"}})}))),i.a.createElement("p",{className:"layout"},m.map((function(e,t){return i.a.createElement("div",{key:t,className:"text-right",style:{width:100/m.length+"%"}},t<m.length-1?e.threshold:"")}))),i.a.createElement("p",null,"Data source: ",i.a.createElement("a",{href:"https://github.com/nytimes/covid-19-data"},"New York Times ")))};var r=t.prototype;return r.componentDidMount=function(){this.updateSummary(),this.updateOptions()},r.componentDidUpdate=function(e){this.props.params.week!==e.params.week&&this.updateSummary(),this.props.data!==e.data&&this.updateOptions()},r.updateSummary=function(){var e=this.props.params.week.value,t=new Date(Date.UTC(2020,0,20)+6048e5*e);this.props.onStateChange({date:"the week of "+t.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})})},r.updateOptions=function(){var e=this.props.data;if(e){for(var r,o=0,a=g(e);!(r=a()).done;){var n=r.value,i=Object.keys(n.casesByWeek).map(Number).sort((function(e,t){return e-t}));o=Math.max(o,i.pop())}this.props.useParam(b(b({},t.parameters),{},{week:b(b({},t.parameters.week),{},{max:o})}))}},r.render=function(){var e=this.props,t=e.params,r=e.data,o=t.cellSize.value,a=t.week.value,n=t.style.value;return i.a.createElement(h,Object.assign({},this.props,{data:r,contours:"Isoband"===n?d:m,cellSize:o,week:a}))},t}(n.Component);w.title="COVID-19 Cases in the United States",w.data={url:s.a+"/covid-by-county.txt",worker:"/workers/contour-data-decoder.js"},w.code=s.b+"/examples/website/contour",w.parameters={style:{displayName:"Style",type:"select",options:["Isoband","Isoline"],value:"Isoband"},cellSize:{displayName:"Cell size",type:"range",value:6e4,step:5e3,min:3e4,max:1e5},week:{displayName:"Week",type:"range",value:30,step:1,min:0,max:30}},w.mapStyle=s.c.DARK;t.default=Object(y.a)(w)}}]);